<div class="sessions-container">
  <div class="sessions-header">
    <h1>Available Orientation Sessions</h1>
  </div>

  <mat-form-field appearance="outline" class="filter-field">
    <mat-label>Search Sessions</mat-label>
    <input
      matInput
      [(ngModel)]="searchText"
      (keyup)="applyFilter()"
      placeholder="Search by faculty name..."
    />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!loading" class="sessions-content">
    <div *ngIf="availableSessions.length === 0" class="no-sessions">
      <p>No available orientation sessions at this time.</p>
    </div>

    <div class="sessions-grid">
      <mat-card
        *ngFor="
          let session of availableSessions | filter : searchText : 'facultyName'
        "
        class="session-card"
      >
        <mat-card-header>
          <mat-card-title>Session #{{ session.orientationID }}</mat-card-title>
          <mat-card-subtitle
            >Faculty: {{ session.facultyName }}</mat-card-subtitle
          >
        </mat-card-header>

        <mat-card-content>
          <div class="session-details">
            <p><mat-icon>access_time</mat-icon> {{ session.time }}</p>
            <p>
              <mat-icon>people</mat-icon>
              <span> {{ session.attendees.length }} registered </span>
            </p>
          </div>
        </mat-card-content>

        <mat-card-actions align="end">
          <button
            mat-raised-button
            color="primary"
            (click)="registerForSession(session.orientationID)"
            [disabled]="isRegistered(session.orientationID)"
          >
            {{
              isRegistered(session.orientationID) ? "REGISTERED" : "REGISTER"
            }}
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <div class="my-sessions-button">
      <button
        mat-raised-button
        color="accent"
        routerLink="/student/my-sessions"
      >
        View My Registered Sessions
      </button>
    </div>
  </div>
</div>
